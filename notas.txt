trigger MessagingSessionContext on MessagingSession (after insert) {
    for (MessagingSession ms : Trigger.new) {
        // Buscar el primer mensaje de la conversaciÃ³n
        List<ConversationEntry> entries = [
            SELECT MessageText 
            FROM ConversationEntry 
            WHERE ConversationIdentifier = :ms.ConversationIdentifier 
            ORDER BY CreatedDate ASC 
            LIMIT 1
        ];
        
        if (!entries.isEmpty() && entries[0].MessageText.contains('ðŸ“Š Contexto')) {
            String context = entries[0].MessageText;
            // Parsear y guardar en campos personalizados
            ms.Page_Title__c = extractValue(context, 'TÃ­tulo:');
            ms.Page_URL__c = extractValue(context, 'URL:');
            // etc...
            update ms;
        }
    }
}